<!DOCTYPE html>
<html lang="en">
  <%- include("./partials/head.ejs") %>
  <style>
    h4 {
      display: inline;
    }
  </style>
  <body>
    <%- include("./partials/nav.ejs") %>
    <h1>Post</h1>
    <p><h4>UserId: </h4><%= post.userId %></p>
    <p><h4>Id: </h4><%= post.id %></p>
    <p><h4>Title: </h4><%= post.title %></p>
    <p><h4>Body: </h4><%= post.body %></p>

    <!-- <a href="/edit/<%=user.id %>">Tahrirlash</a> -->
    <button data-id="<%= post.id %>" id="deleteButton">Delete</button>
    <script>
      const deleteButton = document.getElementById("deleteButton");
      deleteButton.addEventListener("click", (e) => {
        const dataId = e.target?.dataset.id || null;
        if (dataId) {
          fetch(`/posts/${dataId}`, {
            method: "DELETE",
          })
          .then(() => {
            console.log("User deleted");
            alert("User deleted");
            setTimeout(() => {
              window.location.href = "/";
            }, 1000);
          });
        }
      });
    </script>
  </body>
</html> 
